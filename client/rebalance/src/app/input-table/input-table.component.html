<!-- 1st table -->
<table mat-table [dataSource]="bonds">

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef class="table-column">Index</th>
    <td mat-cell *matCellDef="let element">{{element.name}}</td>
    <td mat-footer-cell *matFooterCellDef colspan="1">Total Bonds</td>
  </ng-container>

  <ng-container matColumnDef="units">
    <th mat-header-cell *matHeaderCellDef class="table-column">Units</th>
    <td mat-cell *matCellDef="let element">
      <input [ngModel]="element.units" (ngModelChange)="valuechange($event, element)" type="number" placeholder={{element.units}}>
    </td>
    <td mat-footer-cell *matFooterCellDef>{{getTotal(data.bonds, 'units')}}</td>
  </ng-container>

  <ng-container matColumnDef="target">
    <th mat-header-cell *matHeaderCellDef class="table-column">Target Allocation</th>
    <td mat-cell *matCellDef="let element">
      <input placeholder="%">
    </td>
    <td mat-footer-cell *matFooterCellDef>{{getTotal(data.bonds, 'target')*100}}%</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
</table>

<!-- 2nd table -->
<table mat-table [dataSource]="stocks">
  <ng-container matColumnDef="name">
    <td mat-cell *matCellDef="let element">{{element.name}}</td>
    <td mat-footer-cell *matFooterCellDef class="table-column">Total Stocks</td>
  </ng-container>

  <ng-container matColumnDef="units">
    <td mat-cell *matCellDef="let element">
        <input placeholder="Units">
    </td>
    <td mat-footer-cell *matFooterCellDef class="table-column">{{getTotal(data.stocks, 'units')}}</td>
  </ng-container>

  <ng-container matColumnDef="target">
    <td mat-cell *matCellDef="let element">
      <input placeholder="%">
    </td>
    <td mat-footer-cell *matFooterCellDef class="table-column">{{getTotal(data.stocks, 'target')*100}}%</td>
  </ng-container>

  <ng-container matColumnDef="totalPortfolio">
    <td mat-footer-cell *matFooterCellDef colspan="1">
      Total Portfolio
    </td>
  </ng-container>

  <ng-container matColumnDef="totalValue">
    <td mat-footer-cell *matFooterCellDef>
      {{getTotal(data.stocks, 'units') + getTotal(data.stocks, 'units')}}
    </td>
  </ng-container>
  <ng-container matColumnDef="totalPercent">
    <td mat-footer-cell *matFooterCellDef>
        {{getTotal(data.stocks, 'target') * 100 + getTotal(data.bonds, 'target') * 100}}%
    </td>
  </ng-container>

  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
  <tr mat-footer-row *matFooterRowDef="['totalPortfolio', 'totalValue', 'totalPercent']"></tr>
</table>
